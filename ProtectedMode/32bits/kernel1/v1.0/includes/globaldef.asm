;Mini kernel for 386 PC
;Author: Rafael Sabe
;Email: rafaelmsabe@gmail.com

GDT_SIZE_SECTORS equ 1
GDT_SIZE_BYTES equ (GDT_SIZE_SECTORS*512)

KERNEL_SIZE_SECTORS equ 8
KERNEL_SIZE_BYTES equ (KERNEL_SIZE_SECTORS*512)

P_BOOTDEV equ 0x7bfe

GDT_SEG16 equ 0x0
GDT_INDEX16 equ 0x7e00
GDT_BASE32 equ GDT_INDEX16
GDT_BASE16 equ GDT_BASE32
GDT_DISK_SECTOR equ 2

KERNEL_SEG16 equ 0x1000
KERNEL_INDEX16 equ 0x0
KERNEL_BASE32 equ 0x10000
KERNEL_SEGGDT equ 8
KERNEL_DISK_SECTOR equ (GDT_DISK_SECTOR + GDT_SIZE_SECTORS)

DATA_SEG16 equ 0x2000
DATA_BASE32 equ 0x20000
DATA_SEGGDT equ 16

STACK_SEG16 equ 0x3000
STACK_BASE32 equ 0x30000
STACK_SEGGDT equ 24
STACK_BP_16 equ 0xfffc
STACK_BP_32 equ 0x3fffc

TEMPBUF_ADDR equ 0x20000
TEXTBUF_ADDR equ 0x20100
CGA_MEMSPACE equ 0x20800

USER_MEMSPACE equ 0x28000

